# Texture Atlas Editor

Приложение на PySide6 для нарезки масок из исходных текстур и сборки их в атлас с точным масштабом по реальным размерам.

Desktop tool (PySide6) for cutting masks out of source textures and assembling them into an atlas with precise real‑world scaling.

## Возможности
- Импорт изображений из выбранной папки.
- Создание масок:
  - Polygon tool — произвольный полигон.
  - Rect tool — прямоугольник, превью при движении мыши, квадрат при Shift.
  - Эталон 1 м (Set 1m) — кликните две точки, чтобы задать px_per_meter для текстуры; ширина маски пересчитывается автоматически.
  - Несколько масок на одну текстуру — каждая маска становится отдельным элементом на атласе.
- Масштаб и качество:
  - Плотность атласа (px/m), пересборка с прогрессом.
  - Ресэмплер: Lanczos или Kaiser (настройки beta/radius), кеширование.
- Канвас:
  - Перемещение/выделение элементов, косметические маркеры/линии (не растут при зуме).
  - Сетка с шагом = плотности, убирается при экспорте.
  - Позиции элементов сохраняются в проекте.
- Экспорт: PNG с прозрачным фоном, без сетки/бордера/selection.

## Установка
```bash
python -m venv .venv
.venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

## Запуск
```bash
.venv\Scripts\python main.py
```

## Работа с проектами
- Сохранение/загрузка: JSON хранит пути текстур, маски (points, real_width, original_width, px_per_meter, mask_id), позиции элементов, настройки атласа (density/size) и ресэмплера.
- При загрузке старого формата одиночная маска автоматически приводится к новому виду (masks[]).

## Подсказки по интерфейсу
- Toolbar:
  - Atlas Density — вводите значение и жмите Enter (пересборка с прогрессом).
  - Show Grid — включает/выключает сетку.
  - Export PNG — сохранение финального атласа.
  - Resample Settings — выбор Lanczos/Kaiser, beta/radius.
- Редактор:
  - Polygon / Rect — выбор инструмента маски.
  - Set 1m — два клика задают 1 метр; линия пурпурная.
  - Apply Mask — создаёт/обновляет маску и элемент на атласе.
  - Clear Mask — сброс текущей маски.

## Зависимости
- PySide6
- Pillow
- numpy
